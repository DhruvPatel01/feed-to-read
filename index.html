<!DOCTYPE html>
<html lang="en">

  <head>
    <title>osmos::feed</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="osmos::feed" href="feed.atom" />
    <link href="index.css?v1.14.4" rel="stylesheet" />
    <!-- %before-head-end.html% -->
  </head>

  <body>
    <!-- %after-body-begin.html% -->
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-18 datetime="2023-03-18T00:00:00.000Z">2023-03-18</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-18 datetime="2023-03-18T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/chatgpt/"
                        open
                      >
                        <summary class="article-expander__title">A minute of narcissism: what ChatGPT knows about Dennis Yurichev?</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/chatgpt/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>A minute of narcissism: what ChatGPT knows about Dennis Yurichev?</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-14 datetime="2023-03-14T15:48:28.000Z">2023-03-14</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-14 datetime="2023-03-14T15:48:28.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Netflix TechBlog - Medium</button>
                  <a class="source-heading__link" href="https://netflixtechblog.com?source&#x3D;rss----2615bd06b42e---4">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://medium.com/p/9bef9962dcb7"
                        open
                      >
                        <summary class="article-expander__title">Building a Media Understanding Platform for ML Innovations</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://netflixtechblog.com/building-a-media-understanding-platform-for-ml-innovations-9bef9962dcb7?source&#x3D;rss----2615bd06b42e---4">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://miro.medium.com/v2/resize:fit:854/0*6aJVHbaKKjAKvc3X" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>The media understanding platform serves as an abstraction layer between Machine Learning (ML) algos and various applications.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;21
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Max Slater</button>
                  <a class="source-heading__link" href="https://thenumbat.github.io/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://thenumbat.github.io/Bronx-Zoo/"
                        open
                      >
                        <summary class="article-expander__title">NYC: Bronx Zoo</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://thenumbat.github.io/Bronx-Zoo/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>Bronx Zoo, New York, NY, 2022</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/BTC/"
                        open
                      >
                        <summary class="article-expander__title">I&#x27;m selling BTC</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/BTC/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>I&#x27;m selling BTC</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-13 datetime="2023-03-13T00:00:00.000Z">2023-03-13</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-13 datetime="2023-03-13T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/py_lambda/"
                        open
                      >
                        <summary class="article-expander__title">[Python][For noobs] What is anonymous/lambda function?</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/py_lambda/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>[Python][For noobs] What is anonymous/lambda function?</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-12 datetime="2023-03-12T00:00:00.000Z">2023-03-12</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-12 datetime="2023-03-12T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/REBK10/"
                        open
                      >
                        <summary class="article-expander__title">Reverse Engineering for Beginners: 10-years anniversary</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/REBK10/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>Reverse Engineering for Beginners: 10-years anniversary</span>
                                &ensp;<span class="article-reading-time">(&hairsp;2
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-11 datetime="2023-03-11T00:00:00.000Z">2023-03-11</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-11 datetime="2023-03-11T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/hakank/"
                        open
                      >
                        <summary class="article-expander__title">[SAT][SMT][CS] Håkan Kjellerstrand&#x27;s work</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/hakank/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>[SAT][SMT][CS] Håkan Kjellerstrand&#x27;s work</span>
                                &ensp;<span class="article-reading-time">(&hairsp;3
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-10 datetime="2023-03-10T22:59:11.000Z">2023-03-10</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-10 datetime="2023-03-10T22:59:11.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Netflix TechBlog - Medium</button>
                  <a class="source-heading__link" href="https://netflixtechblog.com?source&#x3D;rss----2615bd06b42e---4">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://medium.com/p/99332231e541"
                        open
                      >
                        <summary class="article-expander__title">Elasticsearch Indexing Strategy in Asset Management Platform (AMP)</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://netflixtechblog.com/elasticsearch-indexing-strategy-in-asset-management-platform-amp-99332231e541?source&#x3D;rss----2615bd06b42e---4">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://miro.medium.com/v2/resize:fit:1200/1*DQfg8USKquc3t9tdayuvQA.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>By Burak Bacioglu, Meenakshi Jindal</span>
                                &ensp;<span class="article-reading-time">(&hairsp;18
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://medium.com/p/46fe225c35c9"
                        open
                      >
                        <summary class="article-expander__title">Data Reprocessing Pipeline in Asset Management Platform @Netflix</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://netflixtechblog.com/data-reprocessing-pipeline-in-asset-management-platform-netflix-46fe225c35c9?source&#x3D;rss----2615bd06b42e---4">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://miro.medium.com/v2/resize:fit:1200/1*1-HX6b39H2L9PwsyRaEBxA.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>By Meenakshi Jindal</span>
                                &ensp;<span class="article-reading-time">(&hairsp;14
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Nim Programming Language</button>
                  <a class="source-heading__link" href="https://nim-lang.org//">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://nim-lang.org//blog/2023/03/10/version-1612-released.html"
                        open
                      >
                        <summary class="article-expander__title">Version 1.6.12 released</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://nim-lang.org//blog/2023/03/10/version-1612-released.html">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://nim-lang.org/assets/img/twitter_banner.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>The Nim team is happy to announce version 1.6.12, our sixth patch release for
Nim 1.6.
Version 1.6.12 is a result of almost four months of hard work, and it contains
51 commits,
bringing some general improvements over 1.6.10.
We would recommend to all of our users to upgrade and use version 1.6.12.
Installing Nim 1.6
New users
Check out if the package manager of your OS already ships version 1.6.12 or
install it as described here.
Existing users
If you have installed a previous version of Nim using choosenim,
getting Nim 1.6.12 is as easy as:
$ choosenim update stable

Alternatively, you can download Nim 1.6.12 from
our nightlies builds.
Donating to Nim
We would like to encourage you to donate to Nim.
The donated money will be used to further improve Nim by creating bounties
for the most important bugfixes and features.
You can donate via:
Open Collective
Patreon
BountySource
PayPal
Bitcoin: 1BXfuKM2uvoD6mbx4g5xM3eQhLzkCK77tJ
If you are a company, we also offer commercial support.
Bugfixes
These reported issues were fixed:
Fixed “sizeof object containing a set is wrong”
(#20914)
Fixed “Missing bounds check for len(toOpenArray..)”
(#20954)
Fixed “Add warning for bare except: clause”
(#19580)
Fixed “Little Copyright notice inconsistency”
(#20906)
Fixed “std/deques: wrong result after calling shrink”
(#21278)
Fixed “io.readLine adds ‘\00’ char to the end”
(#21273)
Fixed “New JS mdoe issue: return + ref ints.”
(#21317)
Fixed “Bad codegen for passed var seq to proc returning array[] converted to seq with @”
(#21333)
Fixed “Templates allowed to use ambiguous identifier”
(#1027)
Fixed “Mutating a var parameter through a mutable view triggers SIGSEGV”
(#20422)
Fixed “macOS use SecRandomCopyBytes instead of getentropy”
(#20466)
Fixed “gcc error when constructing an object that has the same name in the same file name in 2 different directories”
(#20139)
The complete list of changes is available
here.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-08 datetime="2023-03-08T00:00:00.000Z">2023-03-08</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-08 datetime="2023-03-08T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >matklad</button>
                  <a class="source-heading__link" href="https://matklad.github.io">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://matklad.github.io/2023/03/08/an-engine-for-an-editor.html"
                        open
                      >
                        <summary class="article-expander__title">An Engine For An Editor</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://matklad.github.io/2023/03/08/an-engine-for-an-editor.html">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>A common trope is how, if one wants to build a game, one should build a game, rather than a game engine, because it is all too easy to fall into a trap of building a generic solution, without getting to the game proper.
It seems to me that the situation with code editors is the opposite --- many people build editors, but few are building editor engines.
What&#x27;s an editor engine? A made up term I use to denote a thin waist the editor is build upon, the set of core concepts, entities and APIs which power the variety of editor&#x27;s components.
In this post, I will highlight Emacs&#x27; thin waist, which I think is worthy of imitation!</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-07 datetime="2023-03-07T20:39:08.000Z">2023-03-07</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-07 datetime="2023-03-07T20:39:08.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Netflix TechBlog - Medium</button>
                  <a class="source-heading__link" href="https://netflixtechblog.com?source&#x3D;rss----2615bd06b42e---4">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://medium.com/p/3c5c638740a8"
                        open
                      >
                        <summary class="article-expander__title">Data ingestion pipeline with Operation Management</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://netflixtechblog.com/data-ingestion-pipeline-with-operation-management-3c5c638740a8?source&#x3D;rss----2615bd06b42e---4">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://miro.medium.com/v2/resize:fit:1200/0*c7aT8gHQfxOWmcdt" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>by Varun Sekhri, Meenakshi Jindal, Burak Bacioglu</span>
                                &ensp;<span class="article-reading-time">(&hairsp;12
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-06 datetime="2023-03-06T00:00:00.000Z">2023-03-06</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-06 datetime="2023-03-06T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/NoSQL/"
                        open
                      >
                        <summary class="article-expander__title">SQL vs NoSQL: shortest possible explanation</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/NoSQL/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>SQL vs NoSQL: shortest possible explanation</span>
                                &ensp;<span class="article-reading-time">(&hairsp;2
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-05 datetime="2023-03-05T07:30:12.000Z">2023-03-05</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-05 datetime="2023-03-05T07:30:12.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >fasterthanli.me</button>
                  <a class="source-heading__link" href="https://fasterthanli.me">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-12"
                        open
                      >
                        <summary class="article-expander__title">Extra credit</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-12">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>We&#x27;ve achieved our goals already with this series: we have a web service written
in Rust, built into a Docker image with nix, with a nice dev shell, that we can
deploy to fly.io.
But there&#x27;s always room for improvement, and so I wanted to talk about a few
things we didn&#x27;t bother doing in the previous chapters.
clash-geoip available in the dev shell</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-11"
                        open
                      >
                        <summary class="article-expander__title">Generating a docker image with nix</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-11">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>There it is. The final instalment.
Over the course of this series, we&#x27;ve built a very useful Rust web service
that shows us colored ASCII art cats, and we&#x27;ve packaged it with docker, and
deployed it to https://fly.io.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-10"
                        open
                      >
                        <summary class="article-expander__title">Making a dev shell with nix flakes</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-10">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>In the previous chapter, we&#x27;ve made a nix &quot;dev shell&quot; that contained the fly.io
command-line utility, &quot;flyctl&quot;.
That said, that&#x27;s not how I want us to define a dev shell.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-9"
                        open
                      >
                        <summary class="article-expander__title">Learning Nix from the bottom up</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-9">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Remember the snapshot we made allll the way back in Part 1? Now&#x27;s the time to use it.
Well, make sure you&#x27;ve committed and pushed all your changes, but when you&#x27;re
ready, let&#x27;s go back in time to before we installed anything catscii-specific in
our VM.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-8"
                        open
                      >
                        <summary class="article-expander__title">Doing geo-location and keeping analytics</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-8">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>I sold you on some additional functionality for catscii last chapter, and we
got caught up in private registry / docker shenanigans, so, now, let&#x27;s resume
web development as promised.

                        
                            
                                Adding geolocation</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-7"
                        open
                      >
                        <summary class="article-expander__title">Using the Shipyard private crate registry with Docker</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-7">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Wait wait wait, so we&#x27;re not talking about nix yet?
Well, no! The service we have is pretty simple, and I want to complicate things
a bit, to show how things would work in both the Dockerfile and the nix
scenario.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-6"
                        open
                      >
                        <summary class="article-expander__title">Deploying catscii to fly.io</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-6">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Disclosure: 
Because I used to work for fly.io, I still benefit from an employee discount
at the time of this writing: I don&#x27;t have to pay for anything deployed there
for now.
fly.io is still sponsoring me for developing
hring, but this isn&#x27;t a sponsored post. It&#x27;s
just a good fit for what we&#x27;re doing here, with a generous free tier.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-5"
                        open
                      >
                        <summary class="article-expander__title">Writing a Dockerfile for catscii</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-5">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Now that our service is production-ready, it&#x27;s time to deploy it somewhere.
There&#x27;s a lot of ways to approach this: what we are going to do, though, is
build a docker image. Or, I should say, an OCI
image.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-4"
                        open
                      >
                        <summary class="article-expander__title">Serving ASCII cats over HTTP</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-4">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Our catscii program does everything we want it to do, except that it&#x27;s a
command-line application rather than a web server. Let&#x27;s fix that.
axum</span>
                                &ensp;<span class="article-reading-time">(&hairsp;4
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-3"
                        open
                      >
                        <summary class="article-expander__title">Printing ASCII cats to the terminal</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-3">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>Now that our development environment is all set up, let&#x27;s make something useful!
catscii crate</span>
                                &ensp;<span class="article-reading-time">(&hairsp;20
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-2"
                        open
                      >
                        <summary class="article-expander__title">Developing over SSH</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-2">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>With the previous part&#x27;s VM still running, let&#x27;s try connecting to our
machine over SSH.

                        
                            
                                Network addresses, loopback and IP nets</span>
                                &ensp;<span class="article-reading-time">(&hairsp;13
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-1"
                        open
                      >
                        <summary class="article-expander__title">Setting up a local Ubuntu Server VM</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-1">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://fasterthanli.me/img/logo-square-2.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>The first step to using Nix to build Rust is to do so without Nix, so that
when we finally do, we can feel the difference.
There&#x27;s many ways to go about this: everyone has their favorite code editor,
base Linux distribution (there&#x27;s even a NixOS
distribution, which I won&#x27;t cover). Some folks like to develop on macOS first,
and then build for Linux.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;9
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/CRC/"
                        open
                      >
                        <summary class="article-expander__title">[Math] Cyclic redundancy check: yet another interesting feature</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/CRC/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>[Math] Cyclic redundancy check: yet another interesting feature</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Posts on abhinavsarkar.net</button>
                  <a class="source-heading__link" href="https://abhinavsarkar.net/feed.atom">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://notes.abhinavsarkar.net/2023/mastodon-context"
                        open
                      >
                        <summary class="article-expander__title">Pulling missing context of replied toots in Mastodon</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://notes.abhinavsarkar.net/2023/mastodon-context">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>Mastodon is a decentralized social media platform that’s become increasingly popular in recent years. Unlike centralized social media platforms like Twitter and Facebook, Mastodon is run on separate individual servers, each with its own rules and community.
Mastodon servers are connected to each other via the ActivityPub protocol, which allows users to interact across servers. This means that users on one server can follow users on other servers and reply to their toots (Mastodon posts).
However, Mastodon does not automatically pull the context toots of the toots that users replied to from their original server. This means if you reply to a toot from another server, the all other replies to that toot may not be shown to you. See the discussion about this issue here.
This is a problem because it means that you may not be able to see the full context of a conversation, which can make it difficult to understand what’s going on.
The following script is a Python program that extracts the context toots of the toots that users replied to from their original server, and adds them to the local server. The script accomplishes this by first getting all local users that have posted a toot in the last x hours, where x is a configurable parameter. It then retrieves all replies to other users by those users in the last x hours. From there, it gets the context toots of those replies that are already present on the local server.
Then, for each reply toot, it finds the server and ID of the toot that it replied to. It then gets the context toots of those toots from their original server. Finally, it adds those context toots to the local server, which are not already present on the local server by removing the already present context toots from the list of toots to add.
It also caches the URLs of all toots that it has already added to the local server, so that it doesn’t add the same toot multiple times on subsequent runs.
You can run it like this:

ACCESS_TOKEN&#x3D;XXXX python3 pull_context.py fantastic.earth 24


The access token needs to have the following scopes enabled:
admin:read:accounts for getting the user IDs of the users.
read:statuses for getting the replies to other users.
read:search for adding the context toots to the local server.
The script should be run periodically, for example, every 15 minutes. Its only dependency is the requests library.
Click to see the script

  

#!/usr/bin/env python3

from datetime import datetime, timedelta
import itertools
import json
import os
import re
import sys
import requests


def pull_context(
    server,
    access_token,
    seen_urls,
    replied_toot_server_ids,
    reply_interval_hours,
):
    &quot;&quot;&quot;pull the context toots of toots user replied to, from their
    original server, and add them to the local server.&quot;&quot;&quot;
    user_ids &#x3D; get_active_user_ids(server, access_token, reply_interval_hours)
    reply_toots &#x3D; get_all_reply_toots(
        server, user_ids, access_token, seen_urls, reply_interval_hours
    )
    known_context_urls &#x3D; get_all_known_context_urls(server, reply_toots)
    seen_urls.update(known_context_urls)
    replied_toot_ids &#x3D; get_all_replied_toot_server_ids(
        server, reply_toots, replied_toot_server_ids
    )
    context_urls &#x3D; get_all_context_urls(server, replied_toot_ids)
    add_context_urls(server, access_token, context_urls, seen_urls)


def get_active_user_ids(server, access_token, reply_interval_hours):
    &quot;&quot;&quot;get all user IDs on the server that have posted a toot in the given
       time interval&quot;&quot;&quot;
    since &#x3D; datetime.now() - timedelta(days&#x3D;reply_interval_hours / 24 + 1)
    url &#x3D; f&quot;https://{server}/api/v1/admin/accounts&quot;
    resp &#x3D; requests.get(
        url, headers&#x3D;{&quot;Authorization&quot;: f&quot;Bearer {access_token}&quot;}, timeout&#x3D;5
    )
    if resp.status_code &#x3D;&#x3D; 200:
        for user in resp.json():
            last_status_at &#x3D; user[&quot;account&quot;][&quot;last_status_at&quot;]
            if last_status_at is not None:
                last_active &#x3D; datetime.strptime(last_status_at, &quot;%Y-%m-%d&quot;)
                if last_active &gt; since:
                    print(f&quot;Found active user: {user[&#x27;username&#x27;]}&quot;)
                    yield user[&quot;id&quot;]
    elif resp.status_code &#x3D;&#x3D; 403:
        raise Exception(
            f&quot;Error getting user IDs on server {server}. Status code: {resp.status_code}. &quot;
            &quot;Make sure you have the admin:read:accounts scope enabled for your access token.&quot;
        )
    else:
        raise Exception(
            f&quot;Error getting user IDs on server {server}. Status code: {resp.status_code}&quot;
        )


def get_all_reply_toots(
    server, user_ids, access_token, seen_urls, reply_interval_hours
):
    &quot;&quot;&quot;get all replies to other users by the given users in the last day&quot;&quot;&quot;
    replies_since &#x3D; datetime.now() - timedelta(hours&#x3D;reply_interval_hours)
    reply_toots &#x3D; list(
        itertools.chain.from_iterable(
            get_reply_toots(
                user_id, server, access_token, seen_urls, replies_since
            )
            for user_id in user_ids
        )
    )
    print(f&quot;Found {len(reply_toots)} reply toots&quot;)
    return reply_toots


def get_reply_toots(user_id, server, access_token, seen_urls, reply_since):
    &quot;&quot;&quot;get replies by the user to other users since the given date&quot;&quot;&quot;
    url &#x3D; f&quot;https://{server}/api/v1/accounts/{user_id}/statuses?exclude_replies&#x3D;false&amp;limit&#x3D;40&quot;

    try:
        resp &#x3D; requests.get(
            url, headers&#x3D;{&quot;Authorization&quot;: f&quot;Bearer {access_token}&quot;}, timeout&#x3D;5
        )
    except Exception as ex:
        print(
            f&quot;Error getting replies for user {user_id} on server {server}: {ex}&quot;
        )
        return []

    if resp.status_code &#x3D;&#x3D; 200:
        toots &#x3D; [
            toot
            for toot in resp.json()
            if toot[&quot;in_reply_to_id&quot;] is not None
            and toot[&quot;url&quot;] not in seen_urls
            and datetime.strptime(toot[&quot;created_at&quot;], &quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;)
            &gt; reply_since
        ]
        for toot in toots:
            print(f&quot;Found reply toot: {toot[&#x27;url&#x27;]}&quot;)
        return toots
    elif resp.status_code &#x3D;&#x3D; 403:
        raise Exception(
            f&quot;Error getting replies for user {user_id} on server {server}. Status code: {resp.status_code}. &quot;
            &quot;Make sure you have the read:statuses scope enabled for your access token.&quot;
        )

    raise Exception(
        f&quot;Error getting replies for user {user_id} on server {server}. Status code: {resp.status_code}&quot;
    )


def get_all_known_context_urls(server, reply_toots):
    &quot;&quot;&quot;get the context toots of the given toots from their original server&quot;&quot;&quot;
    known_context_urls &#x3D; set(
        filter(
            lambda url: not url.startswith(f&quot;https://{server}/&quot;),
            itertools.chain.from_iterable(
                get_toot_context(*parse_mastodon_url(toot[&quot;url&quot;]), toot[&quot;url&quot;])
                for toot in reply_toots
            ),
        )
    )
    print(f&quot;Found {len(known_context_urls)} known context toots&quot;)
    return known_context_urls


def get_all_replied_toot_server_ids(
    server, reply_toots, replied_toot_server_ids
):
    &quot;&quot;&quot;get the server and ID of the toots the given toots replied to&quot;&quot;&quot;
    return filter(
        lambda x: x is not None,
        (
            get_replied_toot_server_id(server, toot, replied_toot_server_ids)
            for toot in reply_toots
        ),
    )


def get_replied_toot_server_id(server, toot, replied_toot_server_ids):
    &quot;&quot;&quot;get the server and ID of the toot the given toot replied to&quot;&quot;&quot;
    in_reply_to_id &#x3D; toot[&quot;in_reply_to_id&quot;]
    in_reply_to_account_id &#x3D; toot[&quot;in_reply_to_account_id&quot;]
    mentions &#x3D; [
        mention
        for mention in toot[&quot;mentions&quot;]
        if mention[&quot;id&quot;] &#x3D;&#x3D; in_reply_to_account_id
    ]
    if len(mentions) &#x3D;&#x3D; 0:
        return None

    mention &#x3D; mentions[0]

    o_url &#x3D; f&quot;https://{server}/@{mention[&#x27;acct&#x27;]}/{in_reply_to_id}&quot;
    if o_url in replied_toot_server_ids:
        return replied_toot_server_ids[o_url]

    url &#x3D; get_redirect_url(o_url)

    if url is None:
        return None

    match &#x3D; parse_mastodon_url(url)
    if match is not None:
        replied_toot_server_ids[o_url] &#x3D; (url, match)
        return (url, match)

    match &#x3D; parse_pleroma_url(url)
    if match is not None:
        replied_toot_server_ids[o_url] &#x3D; (url, match)
        return (url, match)

    print(f&quot;Error parsing toot URL {url}&quot;)
    replied_toot_server_ids[o_url] &#x3D; None
    return None


def parse_mastodon_url(url):
    &quot;&quot;&quot;parse a Mastodon URL and return the server and ID&quot;&quot;&quot;
    match &#x3D; re.match(
        r&quot;https://(?P&lt;server&gt;.*)/@(?P&lt;username&gt;.*)/(?P&lt;toot_id&gt;.*)&quot;, url
    )
    if match is not None:
        return (match.group(&quot;server&quot;), match.group(&quot;toot_id&quot;))
    return None


def parse_pleroma_url(url):
    &quot;&quot;&quot;parse a Pleroma URL and return the server and ID&quot;&quot;&quot;
    match &#x3D; re.match(r&quot;https://(?P&lt;server&gt;.*)/objects/(?P&lt;toot_id&gt;.*)&quot;, url)
    if match is not None:
        server &#x3D; match.group(&quot;server&quot;)
        url &#x3D; get_redirect_url(url)
        match &#x3D; re.match(r&quot;/notice/(?P&lt;toot_id&gt;.*)&quot;, url)
        if match is not None:
            return (server, match.group(&quot;toot_id&quot;))
        return None
    return None


def get_redirect_url(url):
    &quot;&quot;&quot;get the URL given URL redirects to&quot;&quot;&quot;
    try:
        resp &#x3D; requests.head(url, allow_redirects&#x3D;False, timeout&#x3D;5)
    except Exception as ex:
        print(f&quot;Error getting redirect URL for URL {url}. Exception: {ex}&quot;)
        return None

    if resp.status_code &#x3D;&#x3D; 200:
        return None
    elif resp.status_code &#x3D;&#x3D; 302:
        redirect_url &#x3D; resp.headers[&quot;Location&quot;]
        print(f&quot;Discovered redirect for URL {url}&quot;)
        return redirect_url
    else:
        print(
            f&quot;Error getting redirect URL for URL {url}. Status code: {resp.status_code}&quot;
        )
        return None


def get_all_context_urls(server, replied_toot_ids):
    &quot;&quot;&quot;get the URLs of the context toots of the given toots&quot;&quot;&quot;
    return filter(
        lambda url: not url.startswith(f&quot;https://{server}/&quot;),
        itertools.chain.from_iterable(
            get_toot_context(server, toot_id, url)
            for (url, (server, toot_id)) in replied_toot_ids
        ),
    )


def get_toot_context(server, toot_id, toot_url):
    &quot;&quot;&quot;get the URLs of the context toots of the given toot&quot;&quot;&quot;
    url &#x3D; f&quot;https://{server}/api/v1/statuses/{toot_id}/context&quot;
    try:
        resp &#x3D; requests.get(url, timeout&#x3D;5)
    except Exception as ex:
        print(f&quot;Error getting context for toot {toot_url}. Exception: {ex}&quot;)
        return []

    if resp.status_code &#x3D;&#x3D; 200:
        res &#x3D; resp.json()
        print(f&quot;Got context for toot {toot_url}&quot;)
        return (toot[&quot;url&quot;] for toot in (res[&quot;ancestors&quot;] + res[&quot;descendants&quot;]))

    print(
        f&quot;Error getting context for toot {toot_url}. Status code: {resp.status_code}&quot;
    )
    return []


def add_context_urls(server, access_token, context_urls, seen_urls):
    &quot;&quot;&quot;add the given toot URLs to the server&quot;&quot;&quot;
    count &#x3D; 0
    for url in context_urls:
        if url not in seen_urls:
            seen_urls.add(url)
            add_context_url(url, server, access_token)
            count +&#x3D; 1

    print(f&quot;Added {count} new context toots&quot;)


def add_context_url(url, server, access_token):
    &quot;&quot;&quot;add the given toot URL to the server&quot;&quot;&quot;
    search_url &#x3D; f&quot;https://{server}/api/v2/search?q&#x3D;{url}&amp;resolve&#x3D;true&amp;limit&#x3D;1&quot;

    try:
        resp &#x3D; requests.get(
            search_url,
            headers&#x3D;{&quot;Authorization&quot;: f&quot;Bearer {access_token}&quot;},
            timeout&#x3D;5,
        )
    except Exception as ex:
        print(
            f&quot;Error adding url {search_url} to server {server}. Exception: {ex}&quot;
        )
        return

    if resp.status_code &#x3D;&#x3D; 200:
        print(f&quot;Added context url {url}&quot;)
    elif resp.status_code &#x3D;&#x3D; 403:
        print(
            f&quot;Error adding url {search_url} to server {server}. Status code: {resp.status_code}. &quot;
            &quot;Make sure you have the read:search scope enabled for your access token.&quot;
        )
    else:
        print(
            f&quot;Error adding url {search_url} to server {server}. Status code: {resp.status_code}&quot;
        )


class OrderedSet:
    &quot;&quot;&quot;An ordered set implementation over a dict&quot;&quot;&quot;

    def __init__(self, iterable):
        self._dict &#x3D; {}
        for item in iterable:
            self.add(item)

    def add(self, item):
        if item not in self._dict:
            self._dict[item] &#x3D; None

    def update(self, iterable):
        for item in iterable:
            self.add(item)

    def __contains__(self, item):
        return item in self._dict

    def __iter__(self):
        return iter(self._dict)

    def __len__(self):
        return len(self._dict)


if __name__ &#x3D;&#x3D; &quot;__main__&quot;:
    HELP_MESSAGE &#x3D; &quot;&quot;&quot;
Usage: ACCESS_TOKEN&#x3D;XXXX python3 pull_context.py &lt;server&gt; &lt;reply_interval_in_hours&gt;

To run this script, set the ACCESS_TOKEN environment variable to your
Mastodon access token. The access token can be generated at
https://&lt;server&gt;/settings/applications, and must have read:search,
read:statuses and admin:read:accounts scopes.
&quot;&quot;&quot;

    try:
        ACCESS_TOKEN &#x3D; os.environ[&quot;ACCESS_TOKEN&quot;]
    except KeyError:
        print(&quot;ACCESS_TOKEN environment variable not set.&quot;)
        print(HELP_MESSAGE)
        sys.exit(1)

    if len(sys.argv) &lt; 3:
        print(HELP_MESSAGE)
        sys.exit(1)

    SERVER &#x3D; sys.argv[1]
    REPLY_INTERVAL_IN_HOURS &#x3D; int(sys.argv[2])
    SEEN_URLS_FILE &#x3D; &quot;seen_urls&quot;
    REPLIED_TOOT_SERVER_IDS_FILE &#x3D; &quot;replied_toot_server_ids&quot;

    SEEN_URLS &#x3D; OrderedSet([])
    if os.path.exists(SEEN_URLS_FILE):
        with open(SEEN_URLS_FILE, &quot;r&quot;, encoding&#x3D;&quot;utf-8&quot;) as f:
            SEEN_URLS &#x3D; OrderedSet(f.read().splitlines())

    REPLIED_TOOT_SERVER_IDS &#x3D; {}
    if os.path.exists(REPLIED_TOOT_SERVER_IDS_FILE):
        with open(REPLIED_TOOT_SERVER_IDS_FILE, &quot;r&quot;, encoding&#x3D;&quot;utf-8&quot;) as f:
            REPLIED_TOOT_SERVER_IDS &#x3D; json.load(f)

    pull_context(
        SERVER,
        ACCESS_TOKEN,
        SEEN_URLS,
        REPLIED_TOOT_SERVER_IDS,
        REPLY_INTERVAL_IN_HOURS,
    )

    with open(SEEN_URLS_FILE, &quot;w&quot;, encoding&#x3D;&quot;utf-8&quot;) as f:
        f.write(&quot;\n&quot;.join(list(SEEN_URLS)[:10000]))

    with open(REPLIED_TOOT_SERVER_IDS_FILE, &quot;w&quot;, encoding&#x3D;&quot;utf-8&quot;) as f:
        json.dump(dict(list(REPLIED_TOOT_SERVER_IDS.items())[:10000]), f)

  
I hope this is useful to someone else. I’m not a Python expert, so I’m sure there are some things that could be improved. I’m also not sure if this is the best way to do this, but it seems to work well enough for me.
You can like, repost, or comment on this post on Mastodon.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;6
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-03-02 datetime="2023-03-02T00:00:00.000Z">2023-03-02</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-03-02 datetime="2023-03-02T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Nim Programming Language</button>
                  <a class="source-heading__link" href="https://nim-lang.org//">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://nim-lang.org//blog/2023/03/02/this-month-with-nim.html"
                        open
                      >
                        <summary class="article-expander__title">This Month with Nim: Feburary 2023</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://nim-lang.org//blog/2023/03/02/this-month-with-nim.html">
                          <div class="article-summary-box-inner media-object">
                              <img src="https://nim-lang.org/assets/img/twitter_banner.png" loading="lazy" class="media-object__media article-image" />
                            <span class="media-object__text">
                              <span>ttop
Author: Inv2004
System monitoring tool with TUI, historical data service and triggers
[x] Saving historical snapshots via systemd.timer or crontab
[x] Scroll via historical data
[x] TUI with critical values highlight
[x] External triggers (for notifications or other needs)
[x] Ascii graph of historical stats (via https://github.com/Yardanico/asciigraph)
[x] Temperature via sysfs
[x] User-space only, doesn’t require root permissions
[x] Static build
[x] Threads tree
ni18n
Author: Hein Thant
ni18n is a super simple and fast Nim macro for internationalization and localization.
No runtime lookup for translation since all translations are compiled down to Nim functions except we still have a runtime case statement for locale to call correct generated locale specific function.
import ni18n
…</span>
                                &ensp;<span class="article-reading-time">(&hairsp;3
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-02-25 datetime="2023-02-25T00:00:00.000Z">2023-02-25</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-02-25 datetime="2023-02-25T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/log_reminders/"
                        open
                      >
                        <summary class="article-expander__title">[Math][Python][Bash] Printing reminders picked using lorarithmic scale</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/log_reminders/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>[Math][Python][Bash] Printing reminders picked using lorarithmic scale</span>
                                &ensp;<span class="article-reading-time">(&hairsp;2
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-02-22 datetime="2023-02-22T00:00:00.000Z">2023-02-22</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-02-22 datetime="2023-02-22T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/discourse/"
                        open
                      >
                        <summary class="article-expander__title">discourse.yurichev.com</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/discourse/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>discourse.yurichev.com</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/wireguard2/"
                        open
                      >
                        <summary class="article-expander__title">VPN from Android to Linux: WireGuard working example</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/wireguard2/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>VPN from Android to Linux: WireGuard working example</span>
                                &ensp;<span class="article-reading-time">(&hairsp;2
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-02-21 datetime="2023-02-21T00:00:00.000Z">2023-02-21</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-02-21 datetime="2023-02-21T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >matklad</button>
                  <a class="source-heading__link" href="https://matklad.github.io">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://matklad.github.io/2023/02/21/why-SAT-is-hard.html"
                        open
                      >
                        <summary class="article-expander__title">Why SAT Is Hard</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://matklad.github.io/2023/02/21/why-SAT-is-hard.html">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>An introductory post about complexity theory today!
It is relatively well-known that there exist so-called NP-complete problems --- particularly hard problems, such that, if you solve one of them efficiently, you can solve all of them efficiently.
I think I&#x27;ve learned relatively early that, e.g., SAT is such a hard problem.
I&#x27;ve similarly learned a bunch of specific examples of equally hard problems, where solving one solves the other.
However, why SAT is harder than any NP problem remained a mystery for a rather long time to me.
It is a shame --- this fact is rather intuitive and easy to understand.
This post is my attempt at an explanation.
It assumes some familiarity with the space, but it&#x27;s not going to be too technical or thorough.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;6
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-02-20 datetime="2023-02-20T00:00:00.000Z">2023-02-20</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-02-20 datetime="2023-02-20T00:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  >Dennis Yurichev&#x27;s blog</button>
                  <a class="source-heading__link" href="https://yurichev.org/">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://yurichev.org/log2_3/"
                        open
                      >
                        <summary class="article-expander__title">[Math] Binary logarithm, part III</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://yurichev.org/log2_3/">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>[Math] Binary logarithm, part III</span>
                                &ensp;<span class="article-reading-time">(&hairsp;1
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>
      <section class="daily-content js-toggle-accordions-scope">
        <h2 class="daily-heading">
          <button
            class="daily-heading-toggle"
            data-action="toggle-accordions"
            title="Click to toggle the day, Ctrl + click to toggle all."
          >
            <time class="daily-heading-toggle__weekday js-offset-weekday" data-offset-date=2023-02-18 datetime="2023-02-18T06:00:00.000Z">2023-02-18</time>
            <time class="daily-heading-toggle__date js-offset-date" data-offset-date=2023-02-18 datetime="2023-02-18T06:00:00.000Z"></time>
          </button>
        </h2>
        <ul class="sources card">
            <li class="card__section">
              <section class="js-toggle-accordions-scope">
                <h3 class="source-heading">
                  <button
                    class="source-heading__name"
                    data-action="toggle-accordions"
                    title="Click to toggle the source, Ctrl + click to toggle all."
                  ></button>
                  <a class="source-heading__link" href="https://ayazhafiz.com">Open</a>
                </h3>
                <section class="articles-per-source">
                    <article>
                      <details
                        class="article-expander"
                        data-action="toggle-native-accordion"
                        data-accordion-key="https://ayazhafiz.com/articles/23/a-lambda-calculus-with-coroutines-and-heapless-closures"
                        open
                      >
                        <summary class="article-expander__title">A Lambda Calculus With Coroutines and Heapless, Directly-Called Closures</summary>
                        <a class="article-summary-link article-summary-box-outer" href="https://ayazhafiz.com/articles/23/a-lambda-calculus-with-coroutines-and-heapless-closures">
                          <div class="article-summary-box-inner media-object">
                            <span class="media-object__text">
                              <span>co_lc is a lambda calculus extended with stackful coroutines. An efficient implementation for the compilation and virtual machine execution of co_lc is presented. The implementation supports tail-call optimization and eliminates all indirect calls by defunctionalizing closures.</span>
                                &ensp;<span class="article-reading-time">(&hairsp;18
                                  min&hairsp;)</span>
                            </span>
                          </div>
                        </a>
                      </details>
                    </article>
                </section>
              </section>
            </li>
        </ul>
      </section>

    <footer>
      <a class="footer-link" href="https://github.com/DhruvPatel01/feed-to-read/actions/runs/4458186968">
        <time id="build-timestamp" datetime="2023-03-19T01:09:30.535Z">2023-03-19T01:09:30.535Z</time>
      </a>
      <a class="footer-link" href="https://github.com/osmoscraft/osmosfeed">osmosfeed 1.15.1</a>
    </footer>
    <script src="index.js?v1.14.4"></script>
    <!-- %before-body-end.html% -->
  </body>

</html>